<?xml version="1.0" encoding="utf-8"?>
<otrs_package version="1.1">
    <!-- nofilter(TidyAll::Plugin::OTRS::SOPM::DocumentationPresent) -->
    <Name>Znuny4OTRS-SortByLastContact</Name>
    <Version>4.0.2</Version>
    <ChangeLog Version="4.0.2" Date="2019-02-05 18:14:49 +0100">Tidied code.</ChangeLog>
    <ChangeLog Version="4.0.1" Date="2016-07-26 11:45:09 +0200">Fixed issue #11 - Customer webrequests are not counted.</ChangeLog>
    <ChangeLog Version="3.2.0" Date="2015-06-02 14:31:10 UTC">initial release 4.0.x.</ChangeLog>
    <Framework>4.0.x</Framework>
    <PackageRequired Version="4.0.24">Znuny4OTRS-Repo</PackageRequired>
    <Vendor>Znuny GmbH</Vendor>
    <URL>http://znuny.com/</URL>
    <License>GNU AFFERO GENERAL PUBLIC LICENSE Version 3, November 2007</License>
    <Description Lang="en">Ticket sort order by last customer contact.</Description>
    <Description Lang="de">Ticket Sortierung nach letztem Kundenkontakt.</Description>
    <BuildHost>build.znuny.com</BuildHost>
    <BuildDate>2019-02-05 17:14:49 UTC</BuildDate>
    <Filelist>
        <File Permission="644" Location="Kernel/Config/Files/Znuny4OTRSSortByLastContact.xml" Encode="Base64">PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPG90cnNfY29uZmlnIHZlcnNpb249IjEuMCIgaW5pdD0iQ2hhbmdlcyI+CiAgICA8Q29uZmlnSXRlbSBOYW1lPSJUaWNrZXQ6OkV2ZW50TW9kdWxlUG9zdCMjI1NldExhc3RDdXN0b21lckNvbnRhY3QiIFJlcXVpcmVkPSIwIiBWYWxpZD0iMSI+CiAgICAgICAgPERlc2NyaXB0aW9uIFRyYW5zbGF0YWJsZT0iMSI+VGlja2V0IGV2ZW50IG1vZHVsZSB0byB1cGRhdGUgbGFzdCBjdXN0b21lciBjb250YWN0IHRpbWVzdGFtcCBhZnRlciBhcnRpY2xlIGNyZWF0ZSBhY3Rpb24uPC9EZXNjcmlwdGlvbj4KICAgICAgICA8R3JvdXA+Wm51bnk0T1RSUy1Tb3J0QnlMYXN0Q29udGFjdDwvR3JvdXA+CiAgICAgICAgPFN1Ykdyb3VwPkNvcmU6OlRpY2tldDwvU3ViR3JvdXA+CiAgICAgICAgPFNldHRpbmc+CiAgICAgICAgICAgIDxIYXNoPgogICAgICAgICAgICAgICAgPEl0ZW0gS2V5PSJNb2R1bGUiPktlcm5lbDo6U3lzdGVtOjpUaWNrZXQ6OkV2ZW50OjpUaW1lVXBkYXRlPC9JdGVtPgogICAgICAgICAgICAgICAgPEl0ZW0gS2V5PSJFdmVudCI+QXJ0aWNsZUNyZWF0ZTwvSXRlbT4KICAgICAgICAgICAgPC9IYXNoPgogICAgICAgIDwvU2V0dGluZz4KICAgIDwvQ29uZmlnSXRlbT4KICAgIDxDb25maWdJdGVtIE5hbWU9IlRpY2tldDo6RnJvbnRlbmQ6OkFnZW50VGlja2V0UXVldWUjIyNTb3J0Qnk6OkRlZmF1bHQiIFJlcXVpcmVkPSIxIiBWYWxpZD0iMSI+CiAgICAgICAgPERlc2NyaXB0aW9uIFRyYW5zbGF0YWJsZT0iMSI+RGVmaW5lcyB0aGUgZGVmYXVsdCBzb3J0IGNyaXRlcmlhIGZvciBhbGwgcXVldWVzIGRpc3BsYXllZCBpbiB0aGUgcXVldWUgdmlldy48L0Rlc2NyaXB0aW9uPgogICAgICAgIDxHcm91cD5abnVueTRPVFJTLVNvcnRCeUxhc3RDb250YWN0PC9Hcm91cD4KICAgICAgICA8U3ViR3JvdXA+RnJvbnRlbmQ6OkFnZW50OjpUaWNrZXQ6OlZpZXdRdWV1ZTwvU3ViR3JvdXA+CiAgICAgICAgPFNldHRpbmc+CiAgICAgICAgICAgIDxPcHRpb24gU2VsZWN0ZWRJRD0iRHluYW1pY0ZpZWxkX1RpY2tldExhc3RDdXN0b21lckNvbnRhY3RUaW1lIj4KICAgICAgICAgICAgICAgIDxJdGVtIEtleT0iQWdlIiBUcmFuc2xhdGFibGU9IjEiPkFnZTwvSXRlbT4KICAgICAgICAgICAgICAgIDxJdGVtIEtleT0iVGlja2V0TnVtYmVyIiBUcmFuc2xhdGFibGU9IjEiPlRpY2tldE51bWJlcjwvSXRlbT4KICAgICAgICAgICAgICAgIDxJdGVtIEtleT0iVGl0bGUiIFRyYW5zbGF0YWJsZT0iMSI+VGl0bGU8L0l0ZW0+CiAgICAgICAgICAgICAgICA8SXRlbSBLZXk9IlF1ZXVlIiBUcmFuc2xhdGFibGU9IjEiPlF1ZXVlPC9JdGVtPgogICAgICAgICAgICAgICAgPEl0ZW0gS2V5PSJFc2NhbGF0aW9uVGltZSIgVHJhbnNsYXRhYmxlPSIxIj5Fc2NhbGF0aW9uVGltZTwvSXRlbT4KICAgICAgICAgICAgICAgIDxJdGVtIEtleT0iRHluYW1pY0ZpZWxkX1RpY2tldExhc3RDdXN0b21lckNvbnRhY3RUaW1lIj5EeW5hbWljRmllbGRfVGlja2V0TGFzdEN1c3RvbWVyQ29udGFjdFRpbWU8L0l0ZW0+CiAgICAgICAgICAgIDwvT3B0aW9uPgogICAgICAgIDwvU2V0dGluZz4KICAgIDwvQ29uZmlnSXRlbT4KICAgIDxDb25maWdJdGVtIE5hbWU9IlRpY2tldDo6RnJvbnRlbmQ6OkFnZW50VGlja2V0U3RhdHVzVmlldyMjI1NvcnRCeTo6RGVmYXVsdCIgUmVxdWlyZWQ9IjEiIFZhbGlkPSIxIj4KICAgICAgICA8RGVzY3JpcHRpb24gVHJhbnNsYXRhYmxlPSIxIj5EZWZpbmVzIHRoZSBkZWZhdWx0IHRpY2tldCBhdHRyaWJ1dGUgZm9yIHRpY2tldCBzb3J0aW5nIGluIHRoZSBzdGF0dXMgdmlldyBvZiB0aGUgYWdlbnQgaW50ZXJmYWNlLjwvRGVzY3JpcHRpb24+CiAgICAgICAgPEdyb3VwPlpudW55NE9UUlMtU29ydEJ5TGFzdENvbnRhY3Q8L0dyb3VwPgogICAgICAgIDxTdWJHcm91cD5Gcm9udGVuZDo6QWdlbnQ6OlRpY2tldDo6Vmlld1N0YXR1czwvU3ViR3JvdXA+CiAgICAgICAgPFNldHRpbmc+CiAgICAgICAgICAgIDxPcHRpb24gU2VsZWN0ZWRJRD0iRHluYW1pY0ZpZWxkX1RpY2tldExhc3RDdXN0b21lckNvbnRhY3RUaW1lIj4KICAgICAgICAgICAgICAgIDxJdGVtIEtleT0iQWdlIiBUcmFuc2xhdGFibGU9IjEiPkFnZTwvSXRlbT4KICAgICAgICAgICAgICAgIDxJdGVtIEtleT0iVGlja2V0TnVtYmVyIiBUcmFuc2xhdGFibGU9IjEiPlRpY2tldE51bWJlcjwvSXRlbT4KICAgICAgICAgICAgICAgIDxJdGVtIEtleT0iVGl0bGUiIFRyYW5zbGF0YWJsZT0iMSI+VGl0bGU8L0l0ZW0+CiAgICAgICAgICAgICAgICA8SXRlbSBLZXk9IlF1ZXVlIiBUcmFuc2xhdGFibGU9IjEiPlF1ZXVlPC9JdGVtPgogICAgICAgICAgICAgICAgPEl0ZW0gS2V5PSJQcmlvcml0eSIgVHJhbnNsYXRhYmxlPSIxIj5Qcmlvcml0eTwvSXRlbT4KICAgICAgICAgICAgICAgIDxJdGVtIEtleT0iRXNjYWxhdGlvblRpbWUiIFRyYW5zbGF0YWJsZT0iMSI+RXNjYWxhdGlvblRpbWU8L0l0ZW0+CiAgICAgICAgICAgICAgICA8SXRlbSBLZXk9IkR5bmFtaWNGaWVsZF9UaWNrZXRMYXN0Q3VzdG9tZXJDb250YWN0VGltZSI+RHluYW1pY0ZpZWxkX1RpY2tldExhc3RDdXN0b21lckNvbnRhY3RUaW1lPC9JdGVtPgogICAgICAgICAgICA8L09wdGlvbj4KICAgICAgICA8L1NldHRpbmc+CiAgICA8L0NvbmZpZ0l0ZW0+CiAgICA8Q29uZmlnSXRlbSBOYW1lPSJUaWNrZXQ6OkZyb250ZW5kOjpBZ2VudFRpY2tldFN0YXR1c1ZpZXcjIyNPcmRlcjo6RGVmYXVsdCIgUmVxdWlyZWQ9IjEiIFZhbGlkPSIxIj4KICAgICAgICA8RGVzY3JpcHRpb24gVHJhbnNsYXRhYmxlPSIxIj5EZWZpbmVzIHRoZSBkZWZhdWx0IHRpY2tldCBvcmRlciAoYWZ0ZXIgcHJpb3JpdHkgc29ydCkgaW4gdGhlIHN0YXR1cyB2aWV3IG9mIHRoZSBhZ2VudCBpbnRlcmZhY2UuIFVwOiBvbGRlc3Qgb24gdG9wLiBEb3duOiBsYXRlc3Qgb24gdG9wLjwvRGVzY3JpcHRpb24+CiAgICAgICAgPEdyb3VwPlpudW55NE9UUlMtU29ydEJ5TGFzdENvbnRhY3Q8L0dyb3VwPgogICAgICAgIDxTdWJHcm91cD5Gcm9udGVuZDo6QWdlbnQ6OlRpY2tldDo6Vmlld1N0YXR1czwvU3ViR3JvdXA+CiAgICAgICAgPFNldHRpbmc+CiAgICAgICAgICAgIDxPcHRpb24gU2VsZWN0ZWRJRD0iVXAiPgogICAgICAgICAgICAgICAgPEl0ZW0gS2V5PSJEb3duIiBUcmFuc2xhdGFibGU9IjEiPkRvd248L0l0ZW0+CiAgICAgICAgICAgICAgICA8SXRlbSBLZXk9IlVwIiBUcmFuc2xhdGFibGU9IjEiPlVwPC9JdGVtPgogICAgICAgICAgICA8L09wdGlvbj4KICAgICAgICA8L1NldHRpbmc+CiAgICA8L0NvbmZpZ0l0ZW0+CiAgICA8Q29uZmlnSXRlbSBOYW1lPSJUaWNrZXQ6OkZyb250ZW5kOjpBZ2VudFRpY2tldExvY2tlZFZpZXcjIyNTb3J0Qnk6OkRlZmF1bHQiIFJlcXVpcmVkPSIxIiBWYWxpZD0iMSI+CiAgICAgICAgPERlc2NyaXB0aW9uIFRyYW5zbGF0YWJsZT0iMSI+RGVmaW5lcyB0aGUgZGVmYXVsdCB0aWNrZXQgYXR0cmlidXRlIGZvciB0aWNrZXQgc29ydGluZyBpbiB0aGUgbG9ja2VkIHRpY2tldCB2aWV3IG9mIHRoZSBhZ2VudCBpbnRlcmZhY2UuPC9EZXNjcmlwdGlvbj4KICAgICAgICA8R3JvdXA+Wm51bnk0T1RSUy1Tb3J0QnlMYXN0Q29udGFjdDwvR3JvdXA+CiAgICAgICAgPFN1Ykdyb3VwPkZyb250ZW5kOjpBZ2VudDo6VGlja2V0OjpWaWV3TG9ja2VkPC9TdWJHcm91cD4KICAgICAgICA8U2V0dGluZz4KICAgICAgICAgICAgPE9wdGlvbiBTZWxlY3RlZElEPSJEeW5hbWljRmllbGRfVGlja2V0TGFzdEN1c3RvbWVyQ29udGFjdFRpbWUiPgogICAgICAgICAgICAgICAgPEl0ZW0gS2V5PSJBZ2UiIFRyYW5zbGF0YWJsZT0iMSI+QWdlPC9JdGVtPgogICAgICAgICAgICAgICAgPEl0ZW0gS2V5PSJUaWNrZXROdW1iZXIiIFRyYW5zbGF0YWJsZT0iMSI+VGlja2V0TnVtYmVyPC9JdGVtPgogICAgICAgICAgICAgICAgPEl0ZW0gS2V5PSJUaXRsZSIgVHJhbnNsYXRhYmxlPSIxIj5UaXRsZTwvSXRlbT4KICAgICAgICAgICAgICAgIDxJdGVtIEtleT0iUXVldWUiIFRyYW5zbGF0YWJsZT0iMSI+UXVldWU8L0l0ZW0+CiAgICAgICAgICAgICAgICA8SXRlbSBLZXk9IlByaW9yaXR5IiBUcmFuc2xhdGFibGU9IjEiPlByaW9yaXR5PC9JdGVtPgogICAgICAgICAgICAgICAgPEl0ZW0gS2V5PSJFc2NhbGF0aW9uVGltZSIgVHJhbnNsYXRhYmxlPSIxIj5Fc2NhbGF0aW9uVGltZTwvSXRlbT4KICAgICAgICAgICAgICAgIDxJdGVtIEtleT0iRHluYW1pY0ZpZWxkX1RpY2tldExhc3RDdXN0b21lckNvbnRhY3RUaW1lIj5EeW5hbWljRmllbGRfVGlja2V0TGFzdEN1c3RvbWVyQ29udGFjdFRpbWU8L0l0ZW0+CiAgICAgICAgICAgIDwvT3B0aW9uPgogICAgICAgIDwvU2V0dGluZz4KICAgIDwvQ29uZmlnSXRlbT4KICAgIDxDb25maWdJdGVtIE5hbWU9IlRpY2tldDo6RnJvbnRlbmQ6OkFnZW50VGlja2V0UXVldWUjIyNQcmVTb3J0OjpCeVByaW9yaXR5IiBSZXF1aXJlZD0iMSIgVmFsaWQ9IjEiPgogICAgICAgIDxEZXNjcmlwdGlvbiBUcmFuc2xhdGFibGU9IjEiPkRlZmluZXMgaWYgYSBwcmUtc29ydGluZyBieSBwcmlvcml0eSBzaG91bGQgYmUgZG9uZSBpbiB0aGUgcXVldWUgdmlldy48L0Rlc2NyaXB0aW9uPgogICAgICAgIDxHcm91cD5abnVueTRPVFJTLVNvcnRCeUxhc3RDb250YWN0PC9Hcm91cD4KICAgICAgICA8U3ViR3JvdXA+RnJvbnRlbmQ6OkFnZW50OjpUaWNrZXQ6OlZpZXdRdWV1ZTwvU3ViR3JvdXA+CiAgICAgICAgPFNldHRpbmc+CiAgICAgICAgICAgIDxPcHRpb24gU2VsZWN0ZWRJRD0iMCI+CiAgICAgICAgICAgICAgICA8SXRlbSBLZXk9IjAiIFRyYW5zbGF0YWJsZT0iMSI+Tm88L0l0ZW0+CiAgICAgICAgICAgICAgICA8SXRlbSBLZXk9IjEiIFRyYW5zbGF0YWJsZT0iMSI+WWVzPC9JdGVtPgogICAgICAgICAgICA8L09wdGlvbj4KICAgICAgICA8L1NldHRpbmc+CiAgICA8L0NvbmZpZ0l0ZW0+Cjwvb3Ryc19jb25maWc+Cg==</File>
        <File Permission="644" Location="Kernel/Language/de_Znuny4OTRSSortByLastContact.pm" Encode="Base64">IyAtLQojIENvcHlyaWdodCAoQykgMjAxMi0yMDE5IFpudW55IEdtYkgsIGh0dHA6Ly96bnVueS5jb20vCiMgLS0KIyBUaGlzIHNvZnR3YXJlIGNvbWVzIHdpdGggQUJTT0xVVEVMWSBOTyBXQVJSQU5UWS4gRm9yIGRldGFpbHMsIHNlZQojIHRoZSBlbmNsb3NlZCBmaWxlIENPUFlJTkcgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24gKEFHUEwpLiBJZiB5b3UKIyBkaWQgbm90IHJlY2VpdmUgdGhpcyBmaWxlLCBzZWUgaHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzL2FncGwudHh0LgojIC0tCgpwYWNrYWdlIEtlcm5lbDo6TGFuZ3VhZ2U6OmRlX1pudW55NE9UUlNTb3J0QnlMYXN0Q29udGFjdDsKCnVzZSBzdHJpY3Q7CnVzZSB3YXJuaW5nczsKCnVzZSB1dGY4OwoKc3ViIERhdGEgewogICAgbXkgJFNlbGYgPSBzaGlmdDsKCiAgICAkU2VsZi0+e1RyYW5zbGF0aW9ufS0+eyJRdWV1ZSBzb3J0IGJ5IGRlZmF1bHQuIn0gPSAiU3RhbmRhcmQgU29ydGllcnVuZyBkZXIgUXVldWUuIjsKICAgICRTZWxmLT57VHJhbnNsYXRpb259LT57IlRpY2tldCBldmVudCBtb2R1bGUgdG8gdXBkYXRlIGxhc3QgY3VzdG9tZXIgY29udGFjdCB0aW1lc3RhbXAgYWZ0ZXIgYXJ0aWNsZSBjcmVhdGUgYWN0aW9uLiJ9ID0gIlRpY2tldCBFdmVudCBNb2R1bCB6dW0gYXV0b21hdGlzY2hlbiBTZXR6ZW4gZGVzIFplaXRzdGVtcGVscyBmw7xyIGRlbiBsZXR6dGVuIEt1bmRlbi1Lb250YWt0IG5hY2ggRXJzdGVsbHVuZyBlaW5lcyBBcnRpa2Vscy4iOwogICAgJFNlbGYtPntUcmFuc2xhdGlvbn0tPnsnVGlja2V0TGFzdEN1c3RvbWVyQ29udGFjdFRpbWUnfSA9ICdMZXR6dGVyIEt1bmRlbmtvbnRha3QnOwogICAgJFNlbGYtPntUcmFuc2xhdGlvbn0tPnsnVGlja2V0TGFzdEN1c3RvbWVyQ29udGFjdERpcmVjdGlvbid9ID0gJ0xldHp0ZXIgS29udGFrdCBkdXJjaCc7CiAgICByZXR1cm4gMTsKfQoKMTsK</File>
        <File Permission="644" Location="Kernel/System/Ticket/Event/TimeUpdate.pm" Encode="Base64">IyAtLQojIENvcHlyaWdodCAoQykgMjAxMi0yMDE5IFpudW55IEdtYkgsIGh0dHA6Ly96bnVueS5jb20vCiMgLS0KIyBUaGlzIHNvZnR3YXJlIGNvbWVzIHdpdGggQUJTT0xVVEVMWSBOTyBXQVJSQU5UWS4gRm9yIGRldGFpbHMsIHNlZQojIHRoZSBlbmNsb3NlZCBmaWxlIENPUFlJTkcgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24gKEFHUEwpLiBJZiB5b3UKIyBkaWQgbm90IHJlY2VpdmUgdGhpcyBmaWxlLCBzZWUgaHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzL2FncGwudHh0LgojIC0tCgpwYWNrYWdlIEtlcm5lbDo6U3lzdGVtOjpUaWNrZXQ6OkV2ZW50OjpUaW1lVXBkYXRlOwoKdXNlIHN0cmljdDsKdXNlIHdhcm5pbmdzOwoKdXNlIEtlcm5lbDo6U3lzdGVtOjpWYXJpYWJsZUNoZWNrIHF3KDphbGwpOwoKb3VyIEBPYmplY3REZXBlbmRlbmNpZXMgPSAoCiAgICAnS2VybmVsOjpTeXN0ZW06OkR5bmFtaWNGaWVsZCcsCiAgICAnS2VybmVsOjpTeXN0ZW06OkR5bmFtaWNGaWVsZDo6QmFja2VuZCcsCiAgICAnS2VybmVsOjpTeXN0ZW06OkxvZycsCiAgICAnS2VybmVsOjpTeXN0ZW06OlN0YXRlJywKICAgICdLZXJuZWw6OlN5c3RlbTo6VGlja2V0JywKICAgICdLZXJuZWw6OlN5c3RlbTo6VGltZScsCik7CgpzdWIgbmV3IHsKICAgIG15ICggJFR5cGUsICVQYXJhbSApID0gQF87CgogICAgIyBhbGxvY2F0ZSBuZXcgaGFzaCBmb3Igb2JqZWN0CiAgICBteSAkU2VsZiA9IHt9OwogICAgYmxlc3MoICRTZWxmLCAkVHlwZSApOwoKICAgIHJldHVybiAkU2VsZjsKfQoKc3ViIFJ1biB7CiAgICBteSAoICRTZWxmLCAlUGFyYW0gKSA9IEBfOwoKICAgIG15ICREeW5hbWljRmllbGRCYWNrZW5kT2JqZWN0ID0gJEtlcm5lbDo6T00tPkdldCgnS2VybmVsOjpTeXN0ZW06OkR5bmFtaWNGaWVsZDo6QmFja2VuZCcpOwogICAgbXkgJER5bmFtaWNGaWVsZE9iamVjdCAgICAgICAgPSAkS2VybmVsOjpPTS0+R2V0KCdLZXJuZWw6OlN5c3RlbTo6RHluYW1pY0ZpZWxkJyk7CiAgICBteSAkTG9nT2JqZWN0ICAgICAgICAgICAgICAgICA9ICRLZXJuZWw6Ok9NLT5HZXQoJ0tlcm5lbDo6U3lzdGVtOjpMb2cnKTsKICAgIG15ICRTdGF0ZU9iamVjdCAgICAgICAgICAgICAgID0gJEtlcm5lbDo6T00tPkdldCgnS2VybmVsOjpTeXN0ZW06OlN0YXRlJyk7CiAgICBteSAkVGlja2V0T2JqZWN0ICAgICAgICAgICAgICA9ICRLZXJuZWw6Ok9NLT5HZXQoJ0tlcm5lbDo6U3lzdGVtOjpUaWNrZXQnKTsKICAgIG15ICRUaW1lT2JqZWN0ICAgICAgICAgICAgICAgID0gJEtlcm5lbDo6T00tPkdldCgnS2VybmVsOjpTeXN0ZW06OlRpbWUnKTsKCiAgICAjIGNoZWNrIG5lZWRlZCBzdHVmZgogICAgTkVFREVEOgogICAgZm9yIG15ICROZWVkZWQgKHF3KERhdGEgRXZlbnQgQ29uZmlnKSkgewoKICAgICAgICBuZXh0IE5FRURFRCBpZiBkZWZpbmVkICRQYXJhbXskTmVlZGVkfTsKCiAgICAgICAgJExvZ09iamVjdC0+TG9nKAogICAgICAgICAgICBQcmlvcml0eSA9PiAnZXJyb3InLAogICAgICAgICAgICBNZXNzYWdlICA9PiAiUGFyYW1ldGVyICckTmVlZGVkJyBpcyBuZWVkZWQhIiwKICAgICAgICApOwogICAgICAgIHJldHVybjsKICAgIH0KCiAgICByZXR1cm4gMSBpZiAhJFBhcmFte0RhdGF9LT57VGlja2V0SUR9OwogICAgcmV0dXJuIDEgaWYgJFBhcmFte0V2ZW50fSBuZSAnQXJ0aWNsZUNyZWF0ZSc7CgogICAgIyBnZXQgYXJ0aWNsZSBpbmRleAogICAgbXkgQEFydGljbGVJbmRleCA9ICRUaWNrZXRPYmplY3QtPkFydGljbGVJbmRleCgKICAgICAgICBUaWNrZXRJRCA9PiAkUGFyYW17RGF0YX0tPntUaWNrZXRJRH0sCiAgICApOwoKICAgIHJldHVybiAxIGlmICFzY2FsYXIgQEFydGljbGVJbmRleDsKCiAgICAjIGdldCBsYXN0IGFydGljbGUKICAgIG15ICVBcnRpY2xlID0gJFRpY2tldE9iamVjdC0+QXJ0aWNsZUdldCgKICAgICAgICBBcnRpY2xlSUQgPT4gJEFydGljbGVJbmRleFstMV0sCiAgICApOwoKICAgIHJldHVybiAxIGlmICElQXJ0aWNsZTsKICAgIHJldHVybiAxIGlmICRBcnRpY2xle1NlbmRlclR5cGV9ICF+IC9eKGN1c3RvbWVyfGFnZW50KS87CiAgICByZXR1cm4gMSBpZiAkQXJ0aWNsZXtBcnRpY2xlVHlwZX0gIX4gLyhleHRlcm58cGhvbmV8ZmF4fHNtc3x3ZWJyZXF1ZXN0KS87CgogICAgIyByZW1lbWJlciBzZW5kZXIgdHlwZQogICAgbXkgJER5bmFtaWNGaWVsZENvbmZpZ0RpcmVjdGlvbiA9ICREeW5hbWljRmllbGRPYmplY3QtPkR5bmFtaWNGaWVsZEdldCgKICAgICAgICBOYW1lID0+ICJUaWNrZXRMYXN0Q3VzdG9tZXJDb250YWN0RGlyZWN0aW9uIiwKICAgICk7CiAgICByZXR1cm4gMSBpZiAhJER5bmFtaWNGaWVsZENvbmZpZ0RpcmVjdGlvbjsKCiAgICBteSAkRHluYW1pY0ZpZWxkQ29uZmlnVGltZSA9ICREeW5hbWljRmllbGRPYmplY3QtPkR5bmFtaWNGaWVsZEdldCgKICAgICAgICBOYW1lID0+ICJUaWNrZXRMYXN0Q3VzdG9tZXJDb250YWN0VGltZSIsCiAgICApOwogICAgcmV0dXJuIDEgaWYgISREeW5hbWljRmllbGRDb25maWdUaW1lOwoKICAgICMgZ2V0IHRoZSBjdXJyZW50IHRpY2tldAogICAgbXkgJVRpY2tldCA9ICRUaWNrZXRPYmplY3QtPlRpY2tldEdldCgKICAgICAgICBUaWNrZXRJRCA9PiAkUGFyYW17RGF0YX0tPntUaWNrZXRJRH0sCiAgICAgICAgVXNlcklEICAgPT4gMSwKICAgICk7CgogICAgcmV0dXJuIGlmICElVGlja2V0OwoKICAgICMgZ2V0IHRoZSBmdWxsIHRpY2tldCBoaXN0b3J5IG9mIHRoZSBjdXJyZW50IHRpY2tldAogICAgbXkgQFRpY2tldEhpc3RvcnkgPSAkVGlja2V0T2JqZWN0LT5IaXN0b3J5R2V0KAogICAgICAgIFRpY2tldElEID0+ICRQYXJhbXtEYXRhfS0+e1RpY2tldElEfSwKICAgICAgICBVc2VySUQgICA9PiAxLAogICAgKTsKCiAgICByZXR1cm4gaWYgIUBUaWNrZXRIaXN0b3J5OwoKICAgICMgZ2V0IG9ubHkgdGhlIFN0YXRlVXBkYXRlIGVudHJpZXMKICAgIG15IEBVcGRhdGVIaXN0b3J5OwogICAgSVRFTToKICAgIGZvciBteSAkSXRlbSAoQFRpY2tldEhpc3RvcnkpIHsKCiAgICAgICAgbmV4dCBJVEVNIGlmICEkSXRlbTsKICAgICAgICBuZXh0IElURU0gaWYgcmVmICRJdGVtIG5lICdIQVNIJzsKCiAgICAgICAgbmV4dCBJVEVNIGlmICRJdGVtLT57SGlzdG9yeVR5cGV9IG5lICdTdGF0ZVVwZGF0ZSc7CgogICAgICAgIHB1c2ggQFVwZGF0ZUhpc3RvcnksICRJdGVtOwogICAgfQoKICAgICMgZ2V0IHRoZSBwcmV2aW91cyBoaXN0b3J5IGVudHJ5IHRvIGdldCB0aGUgZGF0ZSB2YWx1ZXMKICAgICMgdG8gZmluZCBvdXQgdGhlIHByZXZpb3VzIHRpY2tldHN0YXRlIGluIHRoZSBuZXh0IHN0ZXAKICAgIG15ICVQcmV2aW91c1N0YXRlOwogICAgaWYgKAogICAgICAgIHNjYWxhciBAVXBkYXRlSGlzdG9yeSA+PSAyCiAgICAgICAgJiYgJEFydGljbGV7U2VuZGVyVHlwZX0gZXEgJ2N1c3RvbWVyJwogICAgICAgICkKICAgIHsKICAgICAgICAjIGV4dHJhY3QgcHJldmlvdXMgaGlzdG9yeSBlbnRyeQogICAgICAgIG15ICVQcmV2aW91c0hpc3RvcnlFbnRyeSA9ICV7ICRVcGRhdGVIaXN0b3J5Wy0yXSB9OwoKICAgICAgICAjIGdldCB0aGUgc3RhdGUgb2YgdGhlIHByZXZpb3VzIGhpc3RvcnkgZW50cnkKICAgICAgICAlUHJldmlvdXNTdGF0ZSA9ICRTdGF0ZU9iamVjdC0+U3RhdGVHZXQoCiAgICAgICAgICAgIElEID0+ICRQcmV2aW91c0hpc3RvcnlFbnRyeXtTdGF0ZUlEfSwKICAgICAgICApOwogICAgfQoKICAgIG15ICRMYXN0Q29udGFjdFRpbWUgICA9ICRUaWNrZXR7J1RpY2tldExhc3RDdXN0b21lckNvbnRhY3RUaW1lJ30gICAgICB8fCAnJzsKICAgIG15ICRMYXN0U2VuZGVyICAgICAgICA9ICRUaWNrZXR7J1RpY2tldExhc3RDdXN0b21lckNvbnRhY3REaXJlY3Rpb24nfSB8fCAnJzsKICAgIG15ICRQcmV2aW91c1N0YXRlVHlwZSA9ICRQcmV2aW91c1N0YXRle1R5cGVOYW1lfSAgICAgICAgICAgICAgICAgICAgICB8fCAnJzsKICAgIG15ICROZXdTZW5kZXIgICAgICAgICA9ICRBcnRpY2xle1NlbmRlclR5cGV9OwogICAgbXkgJFN0YXRlVHlwZSAgICAgICAgID0gJFRpY2tldHtTdGF0ZVR5cGV9OwoKICAgIGlmICgKICAgICAgICAkTGFzdFNlbmRlciBlcSAnY3VzdG9tZXInCiAgICAgICAgJiYgJE5ld1NlbmRlciBlcSAnY3VzdG9tZXInCiAgICAgICAgJiYgJFN0YXRlVHlwZSBlcSAnb3BlbicKICAgICAgICAmJiAkUHJldmlvdXNTdGF0ZVR5cGUgbmUgJ2Nsb3NlZCcKICAgICAgICApCiAgICB7CiAgICAgICAgcmV0dXJuIDE7CiAgICB9CgogICAgbXkgJEFyaWNsZUNyZWF0ZWRTeXN0ZW1UaW1lID0gJFRpbWVPYmplY3QtPlRpbWVTdGFtcDJTeXN0ZW1UaW1lKAogICAgICAgIFN0cmluZyA9PiAkQXJ0aWNsZXtDcmVhdGVkfSwKICAgICk7CgogICAgIyByZW1lbWJlciBzZW5kZXIgdGltZSBzdGFtcAogICAgbXkgKCAkU2VjLCAkTWluLCAkSG91ciwgJERheSwgJE1vbnRoLCAkWWVhciApID0gJFRpbWVPYmplY3QtPlN5c3RlbVRpbWUyRGF0ZSgKICAgICAgICBTeXN0ZW1UaW1lID0+ICRBcmljbGVDcmVhdGVkU3lzdGVtVGltZSwKICAgICk7CgogICAgbXkgJERpcmVjdGlvbiA9ICREeW5hbWljRmllbGRCYWNrZW5kT2JqZWN0LT5WYWx1ZVNldCgKICAgICAgICBEeW5hbWljRmllbGRDb25maWcgPT4gJER5bmFtaWNGaWVsZENvbmZpZ0RpcmVjdGlvbiwKICAgICAgICBPYmplY3RJRCAgICAgICAgICAgPT4gJFBhcmFte0RhdGF9LT57VGlja2V0SUR9LAogICAgICAgIFZhbHVlICAgICAgICAgICAgICA9PiAkQXJ0aWNsZXtTZW5kZXJUeXBlfSwKICAgICAgICBVc2VySUQgICAgICAgICAgICAgPT4gMSwKICAgICk7CgogICAgbXkgJFRpbWUgPSAkRHluYW1pY0ZpZWxkQmFja2VuZE9iamVjdC0+VmFsdWVTZXQoCiAgICAgICAgRHluYW1pY0ZpZWxkQ29uZmlnID0+ICREeW5hbWljRmllbGRDb25maWdUaW1lLAogICAgICAgIE9iamVjdElEICAgICAgICAgICA9PiAkUGFyYW17RGF0YX0tPntUaWNrZXRJRH0sCiAgICAgICAgVmFsdWUgICAgICAgICAgICAgID0+ICRBcnRpY2xle0NyZWF0ZWR9LAogICAgICAgIFVzZXJJRCAgICAgICAgICAgICA9PiAxLAogICAgKTsKCiAgICByZXR1cm4gMTsKfQoKMTsK</File>
        <File Permission="755" Location="bin/znuny.UpdateLastCustomerContact.pl" Encode="Base64">IyEvdXNyL2Jpbi9wZXJsCiMgLS0KIyBDb3B5cmlnaHQgKEMpIDIwMTItMjAxOSBabnVueSBHbWJILCBodHRwOi8vem51bnkuY29tLwojIC0tCiMgVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnkKIyBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBBRkZFUk8gR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnkKIyB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uOyBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvcgojIGFueSBsYXRlciB2ZXJzaW9uLgojCiMgVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsCiMgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2YKIyBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuIFNlZSB0aGUKIyBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLgojCiMgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEFmZmVybyBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlCiMgYWxvbmcgd2l0aCB0aGlzIHByb2dyYW07IGlmIG5vdCwgd3JpdGUgdG8gdGhlIEZyZWUgU29mdHdhcmUKIyBGb3VuZGF0aW9uLCBJbmMuLCA1MSBGcmFua2xpbiBTdCwgRmlmdGggRmxvb3IsIEJvc3RvbiwgTUEgMDIxMTAtMTMwMSBVU0EKIyBvciBzZWUgaHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzL2FncGwudHh0LgojIC0tCgp1c2Ugc3RyaWN0Owp1c2Ugd2FybmluZ3M7Cgp1c2UgRmlsZTo6QmFzZW5hbWU7CnVzZSBGaW5kQmluIHF3KCRSZWFsQmluKTsKdXNlIGxpYiBkaXJuYW1lKCRSZWFsQmluKTsKdXNlIGxpYiBkaXJuYW1lKCRSZWFsQmluKSAuICcvS2VybmVsL2NwYW4tbGliJzsKCnVzZSBLZXJuZWw6OlN5c3RlbTo6T2JqZWN0TWFuYWdlcjsKCiMgY3JlYXRlIGNvbW1vbiBvYmplY3RzCmxvY2FsICRLZXJuZWw6Ok9NID0gS2VybmVsOjpTeXN0ZW06Ok9iamVjdE1hbmFnZXItPm5ldygKICAgICdLZXJuZWw6OlN5c3RlbTo6TG9nJyA9PiB7CiAgICAgICAgTG9nUHJlZml4ID0+ICdPVFJTLXpudW55LlVwZGF0ZUxhc3RDdXN0b21lckNvbnRhY3QucGwnLAogICAgfSwKKTsKCm15ICREQk9iamVjdCAgICAgICAgICAgICAgICAgID0gJEtlcm5lbDo6T00tPkdldCgnS2VybmVsOjpTeXN0ZW06OkRCJyk7Cm15ICREeW5hbWljRmllbGRPYmplY3QgICAgICAgID0gJEtlcm5lbDo6T00tPkdldCgnS2VybmVsOjpTeXN0ZW06OkR5bmFtaWNGaWVsZCcpOwpteSAkVGlja2V0T2JqZWN0ICAgICAgICAgICAgICA9ICRLZXJuZWw6Ok9NLT5HZXQoJ0tlcm5lbDo6U3lzdGVtOjpUaWNrZXQnKTsKbXkgJFRpbWVPYmplY3QgICAgICAgICAgICAgICAgPSAkS2VybmVsOjpPTS0+R2V0KCdLZXJuZWw6OlN5c3RlbTo6VGltZScpOwpteSAkRHluYW1pY0ZpZWxkQmFja2VuZE9iamVjdCA9ICRLZXJuZWw6Ok9NLT5HZXQoJ0tlcm5lbDo6U3lzdGVtOjpEeW5hbWljRmllbGQ6OkJhY2tlbmQnKTsKCiMgZ2V0IGFsbCBvcGVuIHRpY2tldHMKJERCT2JqZWN0LT5QcmVwYXJlKAogICAgU1FMID0+ICJTRUxFQ1QgdC5pZCBGUk9NIHRpY2tldCB0LCB0aWNrZXRfc3RhdGUgdHMsIHRpY2tldF9zdGF0ZV90eXBlIHRzdCBXSEVSRSIKICAgICAgICAuICIgdC50aWNrZXRfc3RhdGVfaWQgPSB0cy5pZCBBTkQgdHMudHlwZV9pZCA9IHRzdC5pZCBBTkQgdHN0Lm5hbWUgSU4iCiAgICAgICAgLiAiICgnbmV3JywgJ29wZW4nLCAncGVuZGluZyByZW1pbmRlcicsICdwZW5kaW5nIGF1dG8nKSIKKTsKCm15IEBUaWNrZXRJRHM7CndoaWxlICggbXkgQFJvdyA9ICREQk9iamVjdC0+RmV0Y2hyb3dBcnJheSgpICkgewogICAgcHVzaCBAVGlja2V0SURzLCAkUm93WzBdOwp9CmV4aXQoMCkgaWYgIXNjYWxhciBAVGlja2V0SURzOwoKbXkgJER5bmFtaWNGaWVsZENvbmZpZ0RpcmVjdGlvbiA9ICREeW5hbWljRmllbGRPYmplY3QtPkR5bmFtaWNGaWVsZEdldCgKICAgIE5hbWUgPT4gIlRpY2tldExhc3RDdXN0b21lckNvbnRhY3REaXJlY3Rpb24iLAopOwpleGl0KDApIGlmICEkRHluYW1pY0ZpZWxkQ29uZmlnRGlyZWN0aW9uOwoKbXkgJER5bmFtaWNGaWVsZENvbmZpZ1RpbWUgPSAkRHluYW1pY0ZpZWxkT2JqZWN0LT5EeW5hbWljRmllbGRHZXQoCiAgICBOYW1lID0+ICJUaWNrZXRMYXN0Q3VzdG9tZXJDb250YWN0VGltZSIsCik7CmV4aXQoMCkgaWYgISREeW5hbWljRmllbGRDb25maWdUaW1lOwoKIyB0aWNrZXQgbG9vcApUSUNLRVRTOgpmb3IgbXkgJFRpY2tldElEICggc29ydCB7ICRhIDw9PiAkYiB9IEBUaWNrZXRJRHMgKSB7CgogICAgbXkgQEFydGljbGVJbmRleCA9ICRUaWNrZXRPYmplY3QtPkFydGljbGVJbmRleCggVGlja2V0SUQgPT4gJFRpY2tldElEICk7CgogICAgbmV4dCBUSUNLRVRTIGlmICFzY2FsYXIgQEFydGljbGVJbmRleDsKCiAgICAjIGFydGljbGUgbG9vcAogICAgQVJUSUNMRVM6CiAgICBmb3IgbXkgJEFydGljbGVJRCAoIHJldmVyc2Ugc29ydCB7ICRhIDw9PiAkYiB9IEBBcnRpY2xlSW5kZXggKSB7CgogICAgICAgIG15ICVBcnRpY2xlID0gJFRpY2tldE9iamVjdC0+QXJ0aWNsZUdldCggQXJ0aWNsZUlEID0+ICRBcnRpY2xlSUQgKTsKCiAgICAgICAgbmV4dCBBUlRJQ0xFUyBpZiAhJUFydGljbGU7CiAgICAgICAgbmV4dCBBUlRJQ0xFUyBpZiAkQXJ0aWNsZXtTZW5kZXJUeXBlfSAhfiAvXihjdXN0b21lcnxhZ2VudCkvOwogICAgICAgIG5leHQgQVJUSUNMRVMgaWYgJEFydGljbGV7QXJ0aWNsZVR5cGV9ICF+IC8oZXh0ZXJufHBob25lfGZheHxzbXMpLzsKCiAgICAgICAgbXkgJFN5c3RlbVRpbWUgPSAkVGltZU9iamVjdC0+VGltZVN0YW1wMlN5c3RlbVRpbWUoCiAgICAgICAgICAgIFN0cmluZyA9PiAkQXJ0aWNsZXtDcmVhdGVkfSwKICAgICAgICApOwoKICAgICAgICAjIHVwZGF0ZSBsYXN0IGN1c3RvbWVyIHVwZGF0ZSB0aW1lc3RhbXAKICAgICAgICBteSAoICRTZWMsICRNaW4sICRIb3VyLCAkRGF5LCAkTW9udGgsICRZZWFyICkgPSAkVGltZU9iamVjdC0+U3lzdGVtVGltZTJEYXRlKAogICAgICAgICAgICBTeXN0ZW1UaW1lID0+ICRTeXN0ZW1UaW1lCiAgICAgICAgKTsKCiAgICAgICAgbXkgJERpcmVjdGlvbiA9ICREeW5hbWljRmllbGRCYWNrZW5kT2JqZWN0LT5WYWx1ZVNldCgKICAgICAgICAgICAgRHluYW1pY0ZpZWxkQ29uZmlnID0+ICREeW5hbWljRmllbGRDb25maWdEaXJlY3Rpb24sCiAgICAgICAgICAgIE9iamVjdElEICAgICAgICAgICA9PiAkVGlja2V0SUQsCiAgICAgICAgICAgIFZhbHVlICAgICAgICAgICAgICA9PiAkQXJ0aWNsZXtTZW5kZXJUeXBlfSwKICAgICAgICAgICAgVXNlcklEICAgICAgICAgICAgID0+IDEsCiAgICAgICAgKTsKCiAgICAgICAgbXkgJFRpbWUgPSAkRHluYW1pY0ZpZWxkQmFja2VuZE9iamVjdC0+VmFsdWVTZXQoCiAgICAgICAgICAgIER5bmFtaWNGaWVsZENvbmZpZyA9PiAkRHluYW1pY0ZpZWxkQ29uZmlnVGltZSwKICAgICAgICAgICAgT2JqZWN0SUQgICAgICAgICAgID0+ICRUaWNrZXRJRCwKICAgICAgICAgICAgVmFsdWUgICAgICAgICAgICAgID0+ICRBcnRpY2xle0NyZWF0ZWR9LAogICAgICAgICAgICBVc2VySUQgICAgICAgICAgICAgPT4gMSwKICAgICAgICApOwoKICAgICAgICBsYXN0IEFSVElDTEVTOwogICAgfQp9CgpleGl0KDApOwo=</File>
    </Filelist>
    <CodeInstall Type="post"><![CDATA[

        my $ZnunyHelperObject = $Kernel::OM->Get('Kernel::System::ZnunyHelper');

        # This function creates all dynamic fields that are necessary.
        my @DynamicFields = (
            {
                Name       => 'TicketLastCustomerContactTime',
                Label      => "TicketLastCustomerContactTime",
                ObjectType => 'Ticket',
                FieldType  => 'DateTime',
                Config     => {
                    'DefaultValue'  => 0,
                    'Link'          => '',
                    'YearsInFuture' => 5,
                    'YearsInPast'   => 5,
                    'YearsPeriod'   => 0,
                },
            },
            {
                Name       => 'TicketLastCustomerContactDirection',
                Label      => "TicketLastCustomerContactDirection",
                ObjectType => 'Ticket',
                FieldType  => 'Text',
                Config     => {
                    'DefaultValue' => '',
                    'Link'         => ''
                },
            },
        );

        my $Result = $ZnunyHelperObject->_DynamicFieldsCreateIfNotExists( @DynamicFields );

    ]]></CodeInstall>
    <CodeUninstall Type="post"><![CDATA[

        my $ZnunyHelperObject = $Kernel::OM->Get('Kernel::System::ZnunyHelper');

        my @DynamicFieldRemove = (
            'TicketLastCustomerContactTime',
            'TicketLastCustomerContactDirection'
        );

        $ZnunyHelperObject->_DynamicFieldsDelete( @DynamicFieldRemove );

    ]]></CodeUninstall>
</otrs_package>
